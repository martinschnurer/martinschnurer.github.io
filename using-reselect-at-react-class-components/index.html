<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;width:100%;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:5px;margin-left:15px;}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}h1,h2,h3,h4,h5{font-family:Roboto,sans-serif;font-weight:100;margin-top:1.75rem;break-words:break-all;}a.gatsby-resp-image-link{box-shadow:none;}.text-center{text-align:center;}</style><link rel="apple-touch-icon" sizes="120x120" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-icon-120x120.png"/><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-127960781-1', 'auto', {});
      
      
      
      }
      </script><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><title data-react-helmet="true">Using reselect at React Class Components | Blog</title><meta data-react-helmet="true" name="description" content="Today at the work, I had a little trouble with refactoring our class components. The problem was our react frontend application was unresponsive and lags on…"/><meta data-react-helmet="true" property="og:title" content="Using reselect at React Class Components"/><meta data-react-helmet="true" property="og:description" content="Today at the work, I had a little trouble with refactoring our class components. The problem was our react frontend application was unresponsive and lags on…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Martin Schnürer"/><meta data-react-helmet="true" name="twitter:title" content="Using reselect at React Class Components"/><meta data-react-helmet="true" name="twitter:description" content="Today at the work, I had a little trouble with refactoring our class components. The problem was our react frontend application was unresponsive and lags on…"/><link rel="shortcut icon" href="/icons-df2517047b31779b6dc2798a803afcd4/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/icons-df2517047b31779b6dc2798a803afcd4/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/icons-df2517047b31779b6dc2798a803afcd4/favicon-32x32.png"/><link rel="manifest" href="/icons-df2517047b31779b6dc2798a803afcd4/manifest.json"/><meta name="mobile-web-app-capable" content="yes"/><meta name="theme-color" content="#fff"/><meta name="application-name" content="gatsby-starter-blog"/><link rel="apple-touch-icon" sizes="57x57" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-icon-114x114.png"/><meta name="generator" content="Gatsby 2.7.5"/><link rel="apple-touch-icon" sizes="144x144" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="167x167" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-icon-167x167.png"/><link rel="apple-touch-icon" sizes="180x180" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-icon-180x180.png"/><link rel="apple-touch-icon" sizes="1024x1024" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-icon-1024x1024.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/><meta name="apple-mobile-web-app-title" content="gatsby-starter-blog"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-startup-image-320x460.png"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-startup-image-640x920.png"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-startup-image-640x1096.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-startup-image-750x1294.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 3)" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-startup-image-1182x2208.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 3)" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-startup-image-1242x2148.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-startup-image-748x1024.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-startup-image-768x1004.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-startup-image-1496x2048.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" href="/icons-df2517047b31779b6dc2798a803afcd4/apple-touch-startup-image-1536x2008.png"/><style data-href="/styles.bc431035bdaee94d87bd.css">@import url(https://fonts.googleapis.com/css?family=Roboto:100,400,600,800);@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-4124805c0503dbfe42dd67d7f5715964.woff2) format("woff2"),url(/static/montserrat-latin-100-c8fb2f714bbc7bc3e8dfffa916b286dc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e4bf47bd171a9b2a72dd84c58bf90edf.woff2) format("woff2"),url(/static/montserrat-latin-100italic-d1f3f2d02ee4d7d2d4b1ad865014f189.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-444ae007121264bc1969d49b4031f9b2.woff2) format("woff2"),url(/static/montserrat-latin-200-edbce16a90aa22c297a0307b85789837.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-f316c5d1ec40f3e68654c3f38b3999f3.woff2) format("woff2"),url(/static/montserrat-latin-200italic-d7bbb730d9b5e11720b3eb32326dcca7.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-0a7c6df06e85d978d096d4d18fd8d43d.woff2) format("woff2"),url(/static/montserrat-latin-300-5e86df2cad22d2ef2b03516334afae5e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-c076c4892bc7a4be7b9097e97a35012d.woff2) format("woff2"),url(/static/montserrat-latin-300italic-37c74a8d2d0d36a0a2c6e9a37ee15b0c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-501ce09c42716a2f6e1503a25eb174c9.woff2) format("woff2"),url(/static/montserrat-latin-400-f29d2b8559699b6beb5b29b25b8bc572.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-882908d9950d9c86ebd380877f293d95.woff2) format("woff2"),url(/static/montserrat-latin-400italic-22e7b04e5f2a901d49d4d342315a715a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-f0f2716c5fe401d175b88715e7d28685.woff2) format("woff2"),url(/static/montserrat-latin-500-991b453bf90a0980e78966d2af7e3d3a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-4590ebba421b3288c305305d7fa7b504.woff2) format("woff2"),url(/static/montserrat-latin-500italic-f3d41e4cdcc2314e49ddcea751d6f87f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-15c24f7109941777774ddd2c636c6a50.woff2) format("woff2"),url(/static/montserrat-latin-600-f6dc6096f48956908c1787d9a722570a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-6d10b80529d5c36c7c09fca7193af0fc.woff2) format("woff2"),url(/static/montserrat-latin-600italic-02c4833312d94b1b0866f073023a250e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-79982cd1f74c6fa7451bf9b37ead09ff.woff2) format("woff2"),url(/static/montserrat-latin-700-957e93fbbe131a59791cd820d98b7109.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-283438e9577fe6a684466bb100e105ec.woff2) format("woff2"),url(/static/montserrat-latin-700italic-ca627c5ccc65cf80c2ecaea44b997de9.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-35386154b78d046218fc8f88a44ff515.woff2) format("woff2"),url(/static/montserrat-latin-800-756655905d91b77960888262e7d58d35.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-e1b52a7bd83e2324db6d92bdc206844c.woff2) format("woff2"),url(/static/montserrat-latin-800italic-a69f0add9d86c1a84311d7dd8693ba4a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-260c2ea3ef57feb82251952e605a36d5.woff2) format("woff2"),url(/static/montserrat-latin-900-186cae8091da578150d81958e217714a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-d785fb9fc74588ffb7f306799709a97d.woff2) format("woff2"),url(/static/montserrat-latin-900italic-43b527fe77254f97ea36e2b54e845ec4.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-a50c381443e6993188ed9cc4b6806866.woff2) format("woff2"),url(/static/merriweather-latin-300-2c73b119ad85e697123658b8a091ff83.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-bd410cbf8c272acd4fbdd9f61a7015bf.woff2) format("woff2"),url(/static/merriweather-latin-300italic-9deeb422b65afb1daacc039296bb3640.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-f936cb550d4dcd769f75c453207ac5e6.woff2) format("woff2"),url(/static/merriweather-latin-400-ab0616e6d856817eff54eb8c5e1664e4.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-5c9a23d08e2c851e5a25795b940acd4f.woff2) format("woff2"),url(/static/merriweather-latin-400italic-0ab4b54f3b1e8b14cf755970fde8ce35.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-1636f13a52ca3f0eb8784c9c57f62082.woff2) format("woff2"),url(/static/merriweather-latin-700-cc673c945b482dc1378d4a3c95ffd175.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-8b0db67123584893c6591accbc51640c.woff2) format("woff2"),url(/static/merriweather-latin-700italic-513649f5b9ba4675cff15cf3f7ad4f2a.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-46631a9aab93dec3ed34f429dd1a5646.woff2) format("woff2"),url(/static/merriweather-latin-900-a0528570caa2c785891308ce604d8db7.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-a26a8168916e5d4e5485081171d7fdb0.woff2) format("woff2"),url(/static/merriweather-latin-900italic-db42a3f34378e69ef5aebb6717f1f33e.woff) format("woff")}span.line-numbers-rows{top:1em!important}a,a:active,a:visited{color:#2b27a9;text-decoration:none}a>*{color:initial}input,textarea{border:1px solid #ccc}.width-small{max-width:200px}.width-medium{max-width:400px}.center-image{margin:0 auto}.topbottom_margined{margin-top:15px;margin-bottom:15px}.margin-left{margin-left:15px}.margin-right{margin-right:15px}.error{background-color:rgba(231,14,3,.58);color:#fff}.error,.warning{font-weight:400;border-radius:15px;padding:15px;margin-top:10px;margin-bottom:10px}.warning{background-color:rgba(231,229,44,.58);color:#000}@media only screen and (max-width:500px){h1{font-size:26px}h2{font-size:24px}h3{font-size:22px}h4{font-size:20px}h5{font-size:18px}}.gatsby-highlight{display:grid}.text-center{text-align:center}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.bio-module--bio_container--zgVeZ{display:grid}.bio-module--bio_image_style--2PYjG{margin-bottom:0;min-width:75px;margin-top:-37.5px;border-radius:100%}.bio-module--horizontal_center--1Jndd{display:flex;justify-content:center}.bio-module--name--3kQRP{text-align:center;font-size:28px;font-weight:300;color:#595959}.bio-module--bio_description--TmM-G{text-align:center;color:#545454;font-size:15px}@media only screen and (max-width:500px){.bio-module--bio_image_style--2PYjG{margin-top:20px}}.layout-module--root_panel--3D6dX{background-image:linear-gradient(180deg,#29276c,#5e568f,#908ab2,#c4c0d6,#fafafa);font-family:Roboto,sans-serif;font-weight:100;min-height:100vh;padding-left:0;padding-right:0}@media only screen and (min-width:768px){.layout-module--root_panel--3D6dX{padding-left:70px;padding-right:70px}}@media only screen and (min-width:1200px){.layout-module--root_panel--3D6dX{padding-left:150px;padding-right:150px}}@media only screen and (min-width:1400px){.layout-module--root_panel--3D6dX{padding-left:200px;padding-right:200px}}.layout-module--grid_menu--1Glte{z-index:999;display:grid;grid-template-columns:1fr 1fr;width:100%;justify-content:center}@media only screen and (max-width:768px){.layout-module--grid_menu--1Glte{padding-left:25px;padding-right:25px}}.layout-module--menu--VEQ1k{display:flex;height:60px;color:#f8f8f8}.layout-module--menu--VEQ1k img{width:26px;margin-bottom:0}.layout-module--menu--VEQ1k h5{margin-bottom:0}.layout-module--menu--VEQ1k a{color:#f8f8f8;text-decoration:none;border:none;box-shadow:none;font-size:18px}.layout-module--menu--VEQ1k.layout-module--right_menu--1ROiD{justify-content:flex-end;align-items:center}.layout-module--menu--VEQ1k.layout-module--right_menu--1ROiD .layout-module--menu_item--2grla .layout-module--active--bgzt6{text-decoration:underline}.layout-module--menu--VEQ1k.layout-module--left_menu--1V-xA .layout-module--menu_item--2grla{margin-right:28px;align-self:center}.layout-module--menu--VEQ1k.layout-module--left_menu--1V-xA .layout-module--menu_item--2grla .layout-module--active--bgzt6{text-decoration:underline}.blog-post-module--discuss_box--3LeP1{padding-top:50px}.blog-post-module--blog_post--1yDfC{padding-top:20px}:root{--xs_s:768px;--s_m:992px;--m_lg:1200px}.styles-module--container--3NSU9{display:grid;grid-template-columns:1fr 1fr;grid-gap:16px}.styles-module--container--3NSU9>div{background-color:#f5f5f5;border-radius:5px;padding:10px 20px}.styles-module--childrenWithShadow--B69Nm>div{box-shadow:0 2px 10px 1px rgba(0,0,0,.2)}.styles-module--gridC2--6RCWw{display:grid;grid-template-columns:1fr 1fr}.styles-module--textarea--3BmiB{width:100%;height:250px}.styles-module--fullWidth--q3HEj{grid-column:span 2}.styles-module--halfWidth--1yrg3{grid-column:span 1}.styles-module--wordHistogram--2hE6_{grid-column:1/span 1}.styles-module--charsHistogram--2XfgD{grid-column:2/span 1}.styles-module--charsHistogram--2XfgD table td:first-child{text-align:center}.styles-module--charsHistogram--2XfgD table td:last-child{text-align:left}@media screen and (max-width:992px){.styles-module--charsHistogram--2XfgD,.styles-module--wordHistogram--2hE6_{grid-column:span 2}}.index-module--fw--2UWAE{width:100%;text-decoration:none;box-shadow:none}.index-module--calculator_grid--2IIH2{padding-top:30px;display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:20px;overflow:visible}.index-module--calculator_item--fK1jL{height:100%;border:1px solid #eee;padding:15px;border-radius:5px;box-shadow:0 3px 5px 0 rgba(0,0,0,.1);cursor:pointer;transition:box-shadow .3s ease-in-out,-webkit-transform .3s ease-in-out;transition:box-shadow .3s ease-in-out,transform .3s ease-in-out;transition:box-shadow .3s ease-in-out,transform .3s ease-in-out,-webkit-transform .3s ease-in-out}.index-module--calculator_item--fK1jL h3{text-align:center}.index-module--calculator_item--fK1jL:hover{box-shadow:0 5px 10px 0 rgba(0,0,0,.17);-webkit-transform:translateY(-4px);transform:translateY(-4px)}.index-module--calculator_item--fK1jL a{text-decoration:none}.index-module--input_panel--1EfOy{display:grid;grid-template-columns:1fr;grid-gap:10px}.index-module--input_div--25ArR{display:grid;grid-template-columns:1fr 1fr;padding:5px 0;border-bottom:1px solid #eee}.index-module--input_div--25ArR input{width:100px;align-self:center}.cardbox-module--body_content--QoZ2d{display:grid;grid-template-columns:1fr;justify-content:center}.cardbox-module--inside_content--2Kv0x{background-color:#fafafa;padding:0 38px 20px;overflow-x:visible}@media only screen and (min-width:768px){.cardbox-module--inside_content--2Kv0x{padding:0 70px 20px}}@media only screen and (min-width:1000px){.cardbox-module--inside_content--2Kv0x{padding:0 120px 20px}}.input-module--input--wgZ1q{border:1px solid #e9e9e9;border-radius:4px;height:36px;transition:border .3s ease-in-out;padding-left:9px}.input-module--input--wgZ1q:active,.input-module--input--wgZ1q:focus{outline:none;border:1px solid #4480e0}.money_prediction-module--input_grid--3ch3J{display:grid;grid-auto-flow:column;grid-template-columns:2fr 1fr;align-items:center;margin-bottom:10px}@media only screen and (max-width:768px){.money_prediction-module--input_grid--3ch3J{grid-template-columns:3fr 1fr}}.money_prediction-module--expected_expense--7AP28{display:grid;grid-auto-flow:column;align-items:center;margin-bottom:10px}@media only screen and (max-width:768px){.money_prediction-module--expected_expense--7AP28 input{width:80px}}.money_prediction-module--expected_expense--7AP28 input{margin-left:15px;margin-right:5px}.money_prediction-module--expected_expense--7AP28 .money_prediction-module--clear_span--24M9R{width:25px;height:25px;display:grid;align-items:center;justify-items:center;border:1px solid transparent;border-radius:50%;cursor:pointer;transition:border .25s ease-in-out}.money_prediction-module--expected_expense--7AP28 .money_prediction-module--clear_span--24M9R:hover{border:1px solid #ddd}.money_prediction-module--mobile_hide--2rkF0{display:block}@media only screen and (max-width:768px){.money_prediction-module--mobile_hide--2rkF0{display:none}}.Button-module--button--R8ZjR{border:1px solid #5643ca;background-color:#5643ca;color:#fff;border-radius:4px;cursor:pointer;outline:none}.Button-module--button--R8ZjR:active{border:1px solid #7d6bee;background-color:#7d6bee}.Button-module--button--R8ZjR.Button-module--ghost--EuPxw{background-color:#fff;color:#5643ca}.Button-module--button--R8ZjR.Button-module--ghost--EuPxw:active{background-color:rgba(86,67,202,.07)}.grid-module--container--2JxCl{font-family:Roboto,sans-serif;display:grid;grid-template-rows:50px 400px auto}.grid-module--top--i_8ra{padding:0 20px;display:grid;grid-template-columns:6fr 6fr}.grid-module--logo--25WoE{display:grid;align-items:center;justify-content:flex-start;font-weight:300}.grid-module--actions--1ZXiv{display:grid;grid-auto-columns:100px;grid-auto-flow:column;justify-content:flex-end;font-weight:300}.grid-module--actions--1ZXiv>div{display:grid;align-content:center;justify-content:center}.grid-module--pic--3ipqT{position:relative;background-image:url(https://www.pixelstalk.net/wp-content/uploads/2016/10/bamboo_forest-wallpaper-1920x1200.jpg);background-position-y:bottom;background-size:cover}.grid-module--shadePicWrapper--vWStr{top:0;left:0;position:absolute;width:100%;height:100%;background-color:rgba(0,0,0,.2);transition:background-color .4s ease-in-out}.grid-module--pic--3ipqT:hover .grid-module--shadePicWrapper--vWStr{background-color:rgba(0,0,0,.5)}.grid-module--textWrapper--PLnd3{color:#fff;z-index:5;font-size:32px;font-weight:300;text-align:center;top:0;left:0;position:absolute;width:100%;height:100%;display:grid;align-items:center}.templates-module--templates--1x2MZ{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));grid-gap:2px}.templates-module--templates--1x2MZ>div{min-height:50px;background-color:#eee}.templates-module--grid-c-2--3Pxm1{display:grid;grid-template-columns:1fr 1fr}.templates-module--grid-c-3--dcpaP{display:grid;grid-template-columns:1fr 1fr 1fr}.templates-module--grid-r-2--jDr9W{display:grid;grid-template-rows:1fr 1fr}.templates-module--grid-r-3--NzobU{display:grid;grid-template-rows:1fr 1fr 1fr}.templates-module--grid--1lGaL{display:grid}.templates-module--center-everything--1rDIV{justify-items:center;justify-content:center}.templates-module--card--3pPhX{display:grid;grid-template-rows:1fr 2fr}.templates-module--card--3pPhX .templates-module--icon--2K82Q{justify-content:center}.templates-module--center--2vAcx{display:grid;justify-items:center}.templates-module--image--1dMz3{background-image:url(http://lorempixel.com/1500/400/business)}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/3-85334638ebe33f8ee5c4.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-976ace90291623280c03.js"/><link as="script" rel="preload" href="/19-befca6c4099e9ff8cc57.js"/><link as="script" rel="preload" href="/app-abd03f585f3614f69e4d.js"/><link as="script" rel="preload" href="/1-b764a58bd44c64a87704.js"/><link as="script" rel="preload" href="/styles-85bd91ea9e312838cb93.js"/><link as="script" rel="preload" href="/webpack-runtime-aacae869911e8e26c571.js"/><link as="fetch" rel="preload" href="/static/d/600/path---using-reselect-at-react-class-components-0-cb-183-KAWGoK33i9jDGnndGB0DbfZbjdY.json" crossOrigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="layout-module--root_panel--3D6dX" styles="[object Object]"><div class="layout-module--grid_menu--1Glte"><div class="layout-module--menu--VEQ1k layout-module--left_menu--1V-xA"><div class="layout-module--menu_item--2grla"><a href="/">Home</a></div><div class="layout-module--menu_item--2grla"><a href="/calculators">Tools</a></div></div><div class="layout-module--menu--VEQ1k layout-module--right_menu--1ROiD"><div class="layout-module--menu_item--2grla"></div></div></div><div class="cardbox-module--body_content--QoZ2d"><div class="cardbox-module--inside_content--2Kv0x"><div class="blog-post-module--blog_post--1yDfC"><h1>Using reselect at React Class Components</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-0.875rem">March 27, 2019</p><div><p>Today at the work, I had a little trouble with refactoring our class components. The problem was our react frontend application was unresponsive and lags on user input. Too many key-downs and an input started to filling a few seconds later after user stopped typing. Horrible experience - as for programmer, as for user. I tracked the app with Chrome DevTools. Some of our components were rerendered, but the data change was not intended for these components - so they shouldn’t be rerendered right ? Rerenders happen, when store changes - and store changes when we update input (and we have a lot of inputs). </p>
<p>Our main view looks something like this:</p>
<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber 0" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Panel</span> exntends PureComponent <span class="token punctuation">{</span>
   
   <span class="token function-variable function">compute</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span> counter<span class="token punctuation">,</span> anotherCounter<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token operator">...</span> heavyFunction <span class="token operator">...</span>
   <span class="token punctuation">}</span>

   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      
      <span class="token keyword">const</span> counter1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> counter2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token operator">...</span> a lot <span class="token keyword">of</span> computing
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token punctuation">(</span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HeavySection</span> 
               <span class="token attr-name">onCreate</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compute</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> counter1<span class="token punctuation">,</span> counter2<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
            <span class="token punctuation">/></span></span><span class="token plain-text">
         </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>On line 18 we passed anonymous function to the component <code class="language-text">HeavySection</code> …well,  is this a problem? In most cases not. In my case
it was a problem because rendering of the component last a few hundred milliseconds. The component <code class="language-text">Panel</code> was connected to the <em>redux</em> store. The whole app view is heavy occupied with controlled inputs subscribed to the store (onChange). When a value in the inputs has changed, the store will update with the new immutable value. So the extending from PureComponent however, doesn’t help as soon as reference check fail at the store variable (connected to the component). There is a minimal chance of optimizing the parent panel. The next problem however, is that in render method we have HeavySection component with rerender time in a few hundred milliseconds. For the simplicity, we have only one HeavyComponent, but we could end up with 10-50 with HeavyComponents. Let’s say, the HeavyComponent is extended from PureComponent as well. Again, it doesn’t help as soon as it receives the prop <code class="language-text">onCreate</code> with new anonymous function - every rerender creates new anonymous function again - therefore new reference is created and shallow check at PureComponent (shouldComponentUpdate) will fail!</p>
<h2>What can we do with that ?</h2>
<p>There is 95% chance you can extract that anonymous function and move to the arrow method like this:</p>
<h3>Before:</h3>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Component</span> ext<span class="token operator">...</span> <span class="token punctuation">{</span>
   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Heavy</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
      <span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>After</h3>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Component</span> ext<span class="token operator">...</span> <span class="token punctuation">{</span>
   <span class="token function-variable function">onClickHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
   
   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Heavy</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onClickHandler<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
      <span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Cool! Now the reference of the method is always rock static and will not change, therefore your Heavy component will not be rerendered. Job done.</p>
<p>What about our case, remember ?</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Panel</span> exntends PureComponent <span class="token punctuation">{</span>
   
   <span class="token function-variable function">compute</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span> counter<span class="token punctuation">,</span> anotherCounter<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token operator">...</span> heavyFunction
   <span class="token punctuation">}</span>

   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      
      <span class="token keyword">const</span> counter1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> counter2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token operator">...</span> a lot <span class="token keyword">of</span> computing
         <span class="token operator">...</span> setting counters <span class="token operator">...</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token punctuation">(</span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HeavySection</span> 
               <span class="token attr-name">onCreate</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compute</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> counter1<span class="token punctuation">,</span> counter2<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
            <span class="token punctuation">/></span></span><span class="token plain-text">
         </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Do you remember how I told you 95% of anonymous functions in a prop fields are rewritable ?
Unfortunatelly, this is the case of these last 5%.</p>
<p>You see that our HeavySection executing onCreate function with one argument <code class="language-text">item</code>. This function calls another
function <code class="language-text">this.compute</code> with arguments <em>item</em>, <em>counter1</em>, <em>counter2</em>. So we can’t extract the function to the method, because this called function depends on the variables computed inside render method. For the sake of simplicity and saved time - I will tell you that I am not merely happy with “heavy computiation” inside a render method - you always should be prepared and cautious when something like this start to happen. Render method should always do, what it is called for - to Render! In a best optimized world, we would move the computation outside of the render method and outside of the component - to the store actions or reducer, or in the component method once a time and then save values in the component <em>state</em>. But now, the computing mechanism inside the render method is not readable and uses a lot of props on the computation. So we’ve got a little spaghetti here and it would not be efficient spending a few hours of removing bad looking and unreadable code outside of the render method. </p>
<p>Our purpose was to fasten the application and get rid of eventual lags at typing. We solve that by passing not-changing values to the props of our components.</p>
<p>For clarification see why we can’t extract to the method:</p>
<h2>Before</h2>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Panel</span> exntends PureComponent <span class="token punctuation">{</span>
   
   <span class="token function-variable function">compute</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span> counter<span class="token punctuation">,</span> anotherCounter<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token operator">...</span> heavyFunction
   <span class="token punctuation">}</span>

   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      
      <span class="token keyword">const</span> counter1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> counter2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token operator">...</span> a lot <span class="token keyword">of</span> computing
         <span class="token operator">...</span> setting counters <span class="token operator">...</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token punctuation">(</span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HeavySection</span> 
               <span class="token attr-name">onCreate</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compute</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> counter1<span class="token punctuation">,</span> counter2<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
            <span class="token punctuation">/></span></span><span class="token plain-text">
         </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2> After?</h2>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Panel</span> exntends PureComponent <span class="token punctuation">{</span>
   
   <span class="token function-variable function">compute</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span> counter<span class="token punctuation">,</span> anotherCounter<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token operator">...</span> heavyFunction
   <span class="token punctuation">}</span>

   <span class="token comment">// We don't have counter1 and counter2 variables because they are computed inside render method</span>
   <span class="token function-variable function">extractFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compute</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> counter1 <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span><span class="token punctuation">,</span> counter2 <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span><span class="token punctuation">)</span>

   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      
      <span class="token keyword">const</span> counter1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> counter2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token operator">...</span> a lot <span class="token keyword">of</span> computing
         <span class="token operator">...</span> setting counters <span class="token operator">...</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token punctuation">(</span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HeavySection</span> 
               <span class="token attr-name">onCreate</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>extractFunction<span class="token punctuation">}</span></span>
            <span class="token punctuation">/></span></span><span class="token plain-text">
         </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>As you can see, we can’t do that. We need the <em>counter1</em> and <em>counter2</em> variable coming from render method.</p>
<h1>Solution to the problem</h1>
<p>Have you heard about <em>reselect</em> package? I had this npm package in my mind, heard about it but never used it on the frequently basis. Never had to.</p>
<p>You can find functions as <em>createSelector</em>, <em>defaultMemoize</em>,<em>createSelectorCreator</em> and <em>createStructureCreator</em>.
For more information see <a href="https://github.com/reduxjs/reselect">link</a>.</p>
<p>DefaultMemoize solves this problem. I will explain you how.
Here you can see the definition of the <em>defaultMemoize</em> function.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">defaultMemoize</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> equalityCheck <span class="token operator">=</span> defaultEqualityCheck<span class="token punctuation">)</span></code></pre></div>
<p>At first, I was a little bit confused how I have to use this function. Both arguments <em>func</em> and <em>equalityCheck</em> are functions. Second function is optional and if you don’t provide the function <em>defaultEqualityCheck</em> will be placed as default equalityCheck function. <em>defaultEqualityCheck</em> function looks as simple as:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">defaultEqualityCheck</span><span class="token punctuation">(</span>currentValue<span class="token punctuation">,</span> previousValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> currentValue <span class="token operator">===</span> previousValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Then you call defaultMemoize like this.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> compute <span class="token operator">=</span> <span class="token function">defaultMemoize</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> comparator<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>When you call defaultMemoize, it returns you another function. When you call this returned function, it decides whether return cached value or compute new value. How? By comparator function passed as second argument to the <em>defaultMemoize</em>. By calling the returned function from defaultMemoize, it always returns you a value - cached or computed - faster or slower. And how the value computed is based on <em>fn</em> function (first argument of the <em>defaultMemoize</em> function). Comparator function is called whenever you call <code class="language-text">compute</code> function (returned by defaultMemoize) - if comparator returns true - cache value will be immediately returned. If it returns false, it recomputes the first argument function <code class="language-text">fn</code> again.</p>
<h2>Example</h2>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
   arr<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   hash<span class="token punctuation">:</span> <span class="token string">"efdk3j12b"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> computeSum <span class="token operator">=</span> <span class="token function">defaultMemoize</span><span class="token punctuation">(</span>
   obj <span class="token operator">=></span> obj<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> val<span class="token punctuation">)</span> <span class="token operator">=></span> acc <span class="token operator">+</span> val<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">(</span>current<span class="token punctuation">,</span> previous<span class="token punctuation">)</span> <span class="token operator">=></span> current<span class="token punctuation">.</span>hash <span class="token operator">===</span> previous<span class="token punctuation">.</span>hash<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// expensive first time computation</span>
<span class="token keyword">const</span> firstSum <span class="token operator">=</span> <span class="token function">computeSum</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// see, it has total same values as obj</span>
<span class="token keyword">const</span> newSameObj <span class="token operator">=</span> <span class="token punctuation">{</span>
   arr<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   hash<span class="token punctuation">:</span> <span class="token string">"efdk3j12b"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// compute second time -> cheap, </span>
<span class="token comment">// comparator will be true, returned cache</span>
<span class="token keyword">const</span> secondSum <span class="token operator">=</span> <span class="token function">computeSum</span><span class="token punctuation">(</span>newSameObj<span class="token punctuation">)</span><span class="token punctuation">;</span>

firstSum <span class="token operator">===</span> secondSum <span class="token comment">// true</span></code></pre></div>
<p>Notes: In this example is object <em>obj</em> which is immutable and for some reason he always recreates - it’s values are same
but the reference is always changing. It has <em>arr</em> attribute and <em>hash</em> attribute. We know, that hash is the hash of the array and we want to recompute the sum only if the hash has changed. The memoize function describes how it is done.</p>
<h2>Solve anonymous function problem</h2>
<h3>Before</h3>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Panel</span> exntends PureComponent <span class="token punctuation">{</span>
   
   <span class="token function-variable function">compute</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span> counter<span class="token punctuation">,</span> anotherCounter<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token operator">...</span> heavyFunction
   <span class="token punctuation">}</span>

   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      
      <span class="token keyword">const</span> counter1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> counter2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token operator">...</span> a lot <span class="token keyword">of</span> computing
         <span class="token operator">...</span> setting counters <span class="token operator">...</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token punctuation">(</span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HeavySection</span> 
               <span class="token attr-name">onCreate</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compute</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> counter1<span class="token punctuation">,</span> counter2<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
            <span class="token punctuation">/></span></span><span class="token plain-text">
         </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>After</h3>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Panel</span> exntends PureComponent <span class="token punctuation">{</span>
   
   <span class="token function-variable function">compute</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span> counter<span class="token punctuation">,</span> anotherCounter<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token operator">...</span> heavyFunction
   <span class="token punctuation">}</span>

   createHandlerMemo <span class="token operator">=</span> <span class="token function">defaultMemoize</span><span class="token punctuation">(</span>
      obj <span class="token operator">=></span> item <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compute</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>counter1<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>counter2<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span>current<span class="token punctuation">,</span> prev<span class="token punctuation">)</span> <span class="token operator">=></span> 
         _<span class="token punctuation">.</span><span class="token function">isEqual</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>counter1<span class="token punctuation">,</span> prev<span class="token punctuation">.</span>counter1<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
         _<span class="token punctuation">.</span><span class="token function">isEqual</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>counter2<span class="token punctuation">,</span> prev<span class="token punctuation">.</span>counter2<span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">)</span>

   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      
      <span class="token keyword">const</span> counter1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> counter2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token operator">...</span> a lot <span class="token keyword">of</span> computing
         <span class="token operator">...</span> setting counters <span class="token operator">...</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token punctuation">(</span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HeavySection</span> 
               <span class="token attr-name">onCreate</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createHandlerMemo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>counter1<span class="token punctuation">,</span> counter2<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
            <span class="token punctuation">/></span></span><span class="token plain-text">
         </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We created memoizedSelector inside component as the method. As the first argument (selector) says, it computes out function which will be passed to the component <em>HeavySection</em>. In the comparator, we compare both counters, if they are unchanged - then return previous cached function with the same reference! The HeavySection will not be rendered again and our app is going to be fast!</p>
<p>I have done this today at work - replaced some anonymous functions with memoized selectors and got our app to run significantly faster.</p>
<p>As you may know, the new version of the React uses hooks and one of the hooks is <em>useMemo</em>. Unfortunatelly, you can use <em>useMemo</em> only in functional components. However, you can use <em>defaultMemoize</em> inside your Class Components. Yay!</p>
<p>Thanks for reading! </p>
<h2>Appendix</h2>
<p>I described optimization of the component rerendering on every change of “store”. In our app, due to the age of the project and old technologies used, we had two stores in our app - old store+dispatcher and redux store. We gradually and slowly rewriting functionality to the new redux store and planning to get rid of old store+dispatcher thing. This old store is somehow injecting the values to the components through router and routes. We injecting the store values to the route components by cloning these routes (React.cloneChildren) and passing the new props into them.</p>
<p>This is the reason why I didn’t talk about <em>connect</em> function at all which is part of the <em>react-redux</em> npm package. This is the high-order component injecting store state into wrapped component. The advantage is I can specify which component gets the store and the second advantage is you can choose which state variables to inject into component. And also third one - you can make optimization on the <em>connect</em> level and prevent also rerendering of wrapped component - which was not unfortunatelly our case at the work - because we didn’t have any other option, but to work with the old approach of injecting props into component.</p>
<p>If you are using redux, connect and mapStateToProps - I encourage you to use reselect mostly in your mapStateToProps function. </p>
<blockquote>
<p>Premature optimization is the root of all evil. Donald Knuth</p>
</blockquote>
<p>If you are in hurry and your wrapped component is not big - I understand you and therefore recommend to omit the reselect approach in this case and instead choose simple approach like pictured below. If your rerender doesn’t slow your app - it doesn’t matter for now and you can easily refactor in the future.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> state <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
   foo<span class="token punctuation">:</span> state<span class="token punctuation">.</span>foo
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>ChildComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><hr style="margin-bottom:1.75rem"/><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li style="margin-left:0"><a rel="prev" href="/creating-statistics-from-your-expenses-data/">← <!-- -->Making stats from your gathered expenses data</a></li><li style="margin-left:0"><a rel="next" href="/my-list-of-dont-knows/">My don&#x27;t know list for 2019<!-- --> →</a></li></ul></div></div></div><div class="cardbox-module--body_content--QoZ2d" style="margin-top:15px;margin-bottom:25px"><div class="cardbox-module--inside_content--2Kv0x"><div class="blog-post-module--discuss_box--3LeP1"><div id="disqus_thread"></div></div></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"using-reselect-at-react-class-components-0cb","path":"/using-reselect-at-react-class-components/"};window.dataPath="600/path---using-reselect-at-react-class-components-0-cb-183-KAWGoK33i9jDGnndGB0DbfZbjdY";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-abd03f585f3614f69e4d.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-1cea285f5eaaa7f16268.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-976ace90291623280c03.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-fb76b5c7da828d1141f3.js"],"component---src-pages-calculators-count-words-index-js":["/component---src-pages-calculators-count-words-index-js-a2c2f0a19d16c85f40e8.js"],"component---src-pages-calculators-index-jsx":["/component---src-pages-calculators-index-jsx-a094634cd33e15e7a9a0.js"],"component---src-pages-calculators-inflation-index-jsx":["/component---src-pages-calculators-inflation-index-jsx-6cdb5a7bb5f94e0d4257.js"],"component---src-pages-calculators-money-prediction-jsx":["/component---src-pages-calculators-money-prediction-jsx-3d8ec3a28e896a07fb1f.js"],"component---src-pages-calculators-realestatebus-index-js":["/component---src-pages-calculators-realestatebus-index-js-16121bf9320498759f50.js"],"component---src-pages-calculators-stocksinvest-index-jsx":["/component---src-pages-calculators-stocksinvest-index-jsx-3ad9935622c32bbc0f7f.js"],"component---src-pages-grid-js":["/component---src-pages-grid-js-ff349adcdaaae8177db3.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-d6294ac655e1a31bf24e.js"],"component---src-pages-templates-js":["/component---src-pages-templates-js-7b982c9205ab65b7f7a2.js"],"pages-manifest":["/pages-manifest-a67c4b4df3db35cc6063.js"]};/*]]>*/</script><script src="/webpack-runtime-aacae869911e8e26c571.js" async=""></script><script src="/styles-85bd91ea9e312838cb93.js" async=""></script><script src="/1-b764a58bd44c64a87704.js" async=""></script><script src="/app-abd03f585f3614f69e4d.js" async=""></script><script src="/19-befca6c4099e9ff8cc57.js" async=""></script><script src="/component---src-templates-blog-post-js-976ace90291623280c03.js" async=""></script><script src="/3-85334638ebe33f8ee5c4.js" async=""></script></body></html>