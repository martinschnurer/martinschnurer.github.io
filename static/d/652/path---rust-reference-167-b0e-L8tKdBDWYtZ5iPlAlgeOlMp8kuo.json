{"data":{"site":{"siteMetadata":{"title":"Martin Schnürer","author":"Martin Schnürer"}},"markdownRemark":{"id":"2a2ee36e-43ac-5e4a-a163-a360da6ac4fb","excerpt":"First I heard about Rust in the summer 2018. Since then I didn’t have much time to run into learning new stuff.\nI’m glad this is the right time to look at the…","html":"<p>First I heard about Rust in the summer 2018. Since then I didn’t have much time to run into learning new stuff.\nI’m glad this is the right time to look at the Rust. This is the reference for Rust language and I’ll try my best to write parts of the language as clear as possible so everyone could understand. </p>\n<h1>1. Types</h1>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token comment\">// unsigned integers</span>\n<span class=\"token keyword\">let</span> unsigned_8 <span class=\"token punctuation\">:</span>u8 <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// // from 0 to 255 -> FORMULA: 0 to (2^n)-1</span>\n<span class=\"token keyword\">let</span> unsigned_16 <span class=\"token punctuation\">:</span>u16 <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// from 0 to 65536</span>\n<span class=\"token keyword\">let</span> unsigned_32 <span class=\"token punctuation\">:</span>u32 <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// from 0 to (2^32)-1</span>\n<span class=\"token keyword\">let</span> unsigned_64 <span class=\"token punctuation\">:</span>u64 <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// from 0 to (2^64)-1</span>\n<span class=\"token keyword\">let</span> unsigned_128 <span class=\"token punctuation\">:</span>u128 <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// from 0 to (2^128)-1</span>\n\n<span class=\"token comment\">// signed integers</span>\n<span class=\"token keyword\">let</span> signed_8 <span class=\"token punctuation\">:</span>i8 <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// from -128 to 127 -> FORMULA: -(2^(n-1)) to (2^(n-1))-1</span>\n<span class=\"token keyword\">let</span> signed_16 <span class=\"token punctuation\">:</span>i16 <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// from -32 768 to 32 767</span>\n<span class=\"token keyword\">let</span> signed_32 <span class=\"token punctuation\">:</span>i32 <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// from -(2^31) to (2^31-1)</span>\n<span class=\"token keyword\">let</span> signed_64 <span class=\"token punctuation\">:</span>i64 <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// from -(2^63) to (2^63-1)</span>\n<span class=\"token keyword\">let</span> signed_128 <span class=\"token punctuation\">:</span>i128 <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// from -(2^127) to (2^127-1)</span>\n\n<span class=\"token comment\">// lets get real here</span>\n<span class=\"token keyword\">let</span> floated_32bit <span class=\"token punctuation\">:</span>f32 <span class=\"token operator\">=</span> <span class=\"token number\">2.0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> floated_64bit <span class=\"token punctuation\">:</span>f64 <span class=\"token operator\">=</span> <span class=\"token number\">2.0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// bools</span>\n<span class=\"token keyword\">let</span> b<span class=\"token punctuation\">:</span> bool <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// static string - compile time strings</span>\n<span class=\"token keyword\">let</span> static_string <span class=\"token punctuation\">:</span><span class=\"token operator\">&amp;</span>str <span class=\"token operator\">=</span> <span class=\"token string\">\"hello world\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// dynamic strings</span>\n<span class=\"token keyword\">let</span> std_string <span class=\"token punctuation\">:</span>String <span class=\"token operator\">=</span> String<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello world\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// vectors</span>\n<span class=\"token keyword\">let</span> num_vec <span class=\"token punctuation\">:</span>Vec<span class=\"token operator\">&lt;</span>i32<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// vec! is macro for creating Vec</span></code></pre></div>\n<h1>2. Conditionals</h1>\n<h2>Simple condition</h2>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">if</span> age <span class=\"token operator\">></span> <span class=\"token number\">17</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Okay, now you can drink alcohol\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sorry, alcohol is for people older than 18...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Ternary condition</h2>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">let</span> condition <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> variable <span class=\"token operator\">=</span> <span class=\"token keyword\">if</span> condition <span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// 1 is assigned to variable if condition is true</span>\n   <span class=\"token number\">1</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// 0 is assigned to variable if condition is false</span>\n   <span class=\"token number\">0</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1>3. Loops</h1>\n<h2>3.1 While</h2>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> number <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">while</span> number <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}!\"</span><span class=\"token punctuation\">,</span> number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   number <span class=\"token operator\">=</span> number <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>3.2 Forever</h2>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">loop</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"forever!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>3.3 Array iterating</h2>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> element <span class=\"token keyword\">in</span> a<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"the value is: {}\"</span><span class=\"token punctuation\">,</span> element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1>4. Variables</h1>\n<h2>4.1 Declaration</h2>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// type - immutable integer variable</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> y<span class=\"token punctuation\">:</span> i8<span class=\"token punctuation\">;</span> <span class=\"token comment\">// mutable integer variable - signed mutable variable</span></code></pre></div>\n<h2>4.2 Change primitive value</h2>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token comment\">// all variables without \"mut\" are immutable by default</span>\n<span class=\"token comment\">// if declare variables with \"mut\" identifier, you can mutate t</span>\n<span class=\"token comment\">// these variables</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> year <span class=\"token operator\">=</span> <span class=\"token number\">2018</span><span class=\"token punctuation\">;</span>\nyear <span class=\"token operator\">=</span> <span class=\"token number\">2019</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// OK</span>\n\n<span class=\"token comment\">// code below can't be mutated</span>\n<span class=\"token keyword\">let</span> immutable <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\nimmutable <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ERROR !!!!</span></code></pre></div>\n<h1>5. Function definition</h1>\n<h2>5.1 Static (classic) function</h2>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function\">sum_two_numbers</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">:</span> i32<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span> i32<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> i32 <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// OR</span>\n<span class=\"token comment\">// valid returning without return statement</span>\n<span class=\"token comment\">// see there is no semicolon ;</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">sum_two_numbers</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">:</span> i32<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span> i32<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> i32 <span class=\"token punctuation\">{</span>\n   a <span class=\"token operator\">+</span> b\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>5.2 Lambda function</h2>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">let</span> increment <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">let</span> increment_by <span class=\"token operator\">=</span> <span class=\"token operator\">|</span>x<span class=\"token punctuation\">:</span> i32<span class=\"token operator\">|</span> x <span class=\"token operator\">+</span> increment<span class=\"token punctuation\">;</span>\n\n   <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"increment 5 + 5 is {}\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">increment_by</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token comment\">// OUTPUT: increment 5 + 5 is 10</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1>6. Enums</h1>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">enum</span> Color <span class=\"token punctuation\">{</span>\n   Transparent<span class=\"token punctuation\">,</span>\n   <span class=\"token function\">RGB</span><span class=\"token punctuation\">(</span>u8<span class=\"token punctuation\">,</span> u8<span class=\"token punctuation\">,</span> u8<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token function\">RGBA</span><span class=\"token punctuation\">(</span>u8<span class=\"token punctuation\">,</span> u8<span class=\"token punctuation\">,</span> u8<span class=\"token punctuation\">,</span> f32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   Brown<span class=\"token punctuation\">,</span>\n   Blue<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">let</span> kinda_red <span class=\"token operator\">=</span> Color<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">RGBA</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">match</span> kinda_red <span class=\"token punctuation\">{</span>\n      Color<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Transparent <span class=\"token operator\">=></span> <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"This color is transparent\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      Color<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">RGB</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span> g<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"RGB color with {} red, {} green, {} blue\"</span><span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> g<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      Color<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">RGBA</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span> g<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"RGBA colors {},{},{} transparency = {}\"</span><span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> g<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      _ <span class=\"token operator\">=></span> <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Other cases: Brown or Blue\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// in other languages: Default</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n   <span class=\"token comment\">// We must cover all enum cases, because compiler gonna have problem with that.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1>7. Struct</h1>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">struct</span> Person <span class=\"token punctuation\">{</span>\n   first_name<span class=\"token punctuation\">:</span> String<span class=\"token punctuation\">,</span>\n   last_name<span class=\"token punctuation\">:</span> String<span class=\"token punctuation\">,</span>\n   age<span class=\"token punctuation\">:</span> u32<span class=\"token punctuation\">,</span>\n   address<span class=\"token punctuation\">:</span> String<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">let</span> me <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">{</span>\n      first_name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Martin\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      last_name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Schnurer\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      age<span class=\"token punctuation\">:</span> <span class=\"token number\">23</span><span class=\"token punctuation\">,</span>\n      address<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Some address\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n   <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I am {} {}, I am {} years old and I live at {}\"</span><span class=\"token punctuation\">,</span>\n   me<span class=\"token punctuation\">.</span>first_name<span class=\"token punctuation\">,</span> me<span class=\"token punctuation\">.</span>last_name<span class=\"token punctuation\">,</span> me<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">,</span> me<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token comment\">//OUTPUT: I am Martin Schnurer, I am 23 years old and I live at Some address</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1>7.1 Methods</h1>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">struct</span> Person <span class=\"token punctuation\">{</span>\n   first_name<span class=\"token punctuation\">:</span> String<span class=\"token punctuation\">,</span>\n   last_name<span class=\"token punctuation\">:</span> String<span class=\"token punctuation\">,</span>\n   age<span class=\"token punctuation\">:</span> u32<span class=\"token punctuation\">,</span>\n   address<span class=\"token punctuation\">:</span> String<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">impl</span> Person <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">fn</span> <span class=\"token function\">find_girlfriend</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span>Self<span class=\"token punctuation\">,</span> with_name<span class=\"token punctuation\">:</span> String<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hi I am {} {} and I am looking for a girl with name {}\"</span><span class=\"token punctuation\">,</span> \n               <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>first_name<span class=\"token punctuation\">,</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>last_name<span class=\"token punctuation\">,</span> with_name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">let</span> me <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">{</span>\n      first_name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Martin\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      last_name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Schnurer\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      age<span class=\"token punctuation\">:</span> <span class=\"token number\">23</span><span class=\"token punctuation\">,</span>\n      address<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Some address\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n   me<span class=\"token punctuation\">.</span><span class=\"token function\">find_girlfriend</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Monica\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token comment\">// OUTPUT: Hi I am Martin Schnurer and I am looking for a girl with name Monica</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1>Ownership and Borrowing</h1>\n<h3>Ownership</h3>\n<h4>move ownership</h4>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">struct</span> Person<span class=\"token punctuation\">{</span> age<span class=\"token punctuation\">:</span> u16 <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">write_age</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">:</span> Person<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"This person is {} years old\"</span><span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">is_adult</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">:</span> Person<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> bool <span class=\"token punctuation\">{</span>\n   person<span class=\"token punctuation\">.</span>age <span class=\"token operator\">></span> <span class=\"token number\">17</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">let</span> john <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">{</span>age<span class=\"token punctuation\">:</span> <span class=\"token number\">23</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n   <span class=\"token function\">write_age</span><span class=\"token punctuation\">(</span>john<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// OK: This person is 23 years old  (ownership passed to the write_age function)</span>\n   <span class=\"token comment\">// write_age is out of scope and john variable will be deleted there</span>\n\n   <span class=\"token keyword\">let</span> john_is_adult <span class=\"token operator\">=</span> <span class=\"token function\">is_adult</span><span class=\"token punctuation\">(</span>john<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// COMPILATION FAIL, variable john was moved to the write_age fn</span>\n   <span class=\"token comment\">// we can't use variable.</span>\n<span class=\"token punctuation\">}</span> </code></pre></div>\n<p>After the ownership (variable) is moved into another scope, you can’t use this variable in the scope. See above how\nwe tried to use <em>john</em> variable passing into <em>is_adult</em> function - this will not compile, because we moved ownership of john to the <em>write_age</em> function scope and after <em>write_age</em> is done (out of scope), the content of the <em>john</em> variable is deleted.</p>\n<h4>Returning ownership back to the scope</h4>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">struct</span> Person<span class=\"token punctuation\">{</span> age<span class=\"token punctuation\">:</span> u16 <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">write_age</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">:</span> Person<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> Person <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"This person is {} years old\"</span><span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">return</span> person <span class=\"token comment\">// Now we move back the ownership from the function</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">is_adult</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">:</span> Person<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> bool <span class=\"token punctuation\">{</span>\n   person<span class=\"token punctuation\">.</span>age <span class=\"token operator\">></span> <span class=\"token number\">17</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">let</span> john <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">{</span>age<span class=\"token punctuation\">:</span> <span class=\"token number\">23</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">let</span> john <span class=\"token operator\">=</span> <span class=\"token function\">write_age</span><span class=\"token punctuation\">(</span>john<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// OK: This person is 23 years old  (ownership passed to the write_age function)</span>\n   <span class=\"token comment\">// ownership is moved back from the write_age to the john, we can use john again </span>\n\n   <span class=\"token keyword\">let</span> john_is_adult <span class=\"token operator\">=</span> <span class=\"token function\">is_adult</span><span class=\"token punctuation\">(</span>john<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// OK</span>\n   <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"john is adult = {}\"</span><span class=\"token punctuation\">,</span> john_is_adult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// OK</span>\n<span class=\"token punctuation\">}</span> </code></pre></div>\n<h4>Borrowing</h4>\n<p>Passing and returning ownerships is not always best decision to do - code overhead, </p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">struct</span> Person<span class=\"token punctuation\">{</span> age<span class=\"token punctuation\">:</span> u16 <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">write_age</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span>Person<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// Not returning ownership anymore</span>\n   <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"This person is {} years old\"</span><span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">is_adult</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span>Person<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> bool <span class=\"token punctuation\">{</span>\n   person<span class=\"token punctuation\">.</span>age <span class=\"token operator\">></span> <span class=\"token number\">17</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">let</span> john <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">{</span>age<span class=\"token punctuation\">:</span> <span class=\"token number\">23</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n   <span class=\"token function\">write_age</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>john<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// OK: passing reference</span>\n   \n   <span class=\"token keyword\">let</span> john_is_adult <span class=\"token operator\">=</span> <span class=\"token function\">is_adult</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>john<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// OK, passing reference</span>\n   <span class=\"token function\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"john is adult = {}\"</span><span class=\"token punctuation\">,</span> john_is_adult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>Mutable borrow</h4>\n<p>When we want to pass a reference to another scope, we need to use <strong>mut</strong> keyword at the reference.</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">struct</span> Person<span class=\"token punctuation\">{</span> age<span class=\"token punctuation\">:</span> u16 <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">increment_age</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> Person<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   person<span class=\"token punctuation\">.</span>age <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> john <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">{</span>age<span class=\"token punctuation\">:</span> <span class=\"token number\">23</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// we need to mark john as mutable as the function will mutate our passed variable</span>\n   <span class=\"token function\">increment_age</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> john<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// instead of &amp;john we pass &amp;mut john</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>Borrowing rules</h4>\n<ol>\n<li>In the given scope, you can borrow as much immutable borrows as you want. (To observe source value)</li>\n<li>If you create one mutable borrow, you can’t create immutable borrows in that scope. (Only one variable can change source value)</li>\n</ol>\n<h2>Feelings and conclusion</h2>\n<p>The one reason rust convinced me to look at it deeper was claim that we can write rust in <u>safe</u> approach without garbace collector needed. I haven’t written anything serious in rust - but I had feeling the compiler was real dictator and didn’t allow me to easily do anything I want - but when it does, I had good feeling about compiled code and in a large amount of executions code was bug free and run as expected - without panicing. </p>\n<p>On the other side, I had serious problem to get used to traits and lifetimes. I didn’t referenced lifetimes above, because I assume them to be more difficult to learn and as I wanted to let this reference as simple as possible - I didn’t describing them here (but it doesn’t mean I won’t describe them in another post later).</p>\n<p>In C language, you probably didn’t have a problem to easily implement linked list. Well, good luck with trying that in Rust. Linked list is pretty all about pointers and pointer checking. Rust is pretty good at controlling what exactly are you doing with pointers and memory - and if what you do with them is unsafe, it won’t compile.</p>\n<p>I found this <a href=\"https://rust-unofficial.github.io/too-many-lists/\">article/docs</a> to deeply describe linked list implementation in Rust. Have fun.</p>","frontmatter":{"title":"Rust Reference","date":"May 07, 2019"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/rust-reference/","previous":{"fields":{"slug":"/so-when-is-actually-the-time-to-retire/"},"frontmatter":{"title":"So when is actually the time to retire?","publish":null}},"next":null}}